version: '3'

services:
  pg1:
    image: new/postgresql
    environment:
    - HAB_LICENSE=accept
    command: --group cluster
      --topology leader
    volumes:
      - pg1-data:/hab/svc/postgresql/data
  pg2:
    image: new/postgresql
    environment:
    - HAB_LICENSE=accept
    command: --group cluster
      --topology leader
      --peer pg1
    volumes:
      - pg2-data:/hab/svc/postgresql/data
  pg3:
    image: new/postgresql
    environment:
    - HAB_LICENSE=accept
    command: --group cluster
      --topology leader
      --peer pg1
    volumes:
      - pg3-data:/hab/svc/postgresql/data

volumes:
  pg1-data:
  pg2-data:
  pg3-data:
